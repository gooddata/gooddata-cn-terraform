###
# AWS account & region
###
# AWS profile name from ~/.aws/config
aws_profile_name = "my-profile"

# Region to deploy resources to
aws_region = "eu-central-1"

# Additional tags to apply to all AWS resources
# aws_additional_tags = {
#   Environment = "dev"
# }

###
# GoodData.CN deployment configuration
###
helm_gdcn_version = "3.55.0" # use latest version here: https://www.gooddata.com/docs/cloud-native/latest/whats-new-cn/
deployment_name   = "gooddata-cn"

# GoodData.CN license key
gdcn_license_key = "key/asdf==" # provided by GoodData

# Deploys and enables GoodData generative AI services
# enable_ai_features = true

# Size profile controls replicas/resources across services:
# - dev: lowest footprint, not HA
# - prod-small: HA (>= 2 replica per service), resources for services increased
# NOTE: switching size profile after deploying isn't supported since persistent
# volume sizes can't be automatically adjusted in-place.
size_profile = "prod-small"

###
# DNS
###
# "route53" - ExternalDNS component is installed and given permission to manage records in the specified Route53 zone (Hosted zone ID).
dns_provider    = "route53"
route53_zone_id = "Z0123456789ABC"

# "self-managed" - DNS records are managed manually (see guidance in Terraform output).
# dns_provider = "self-managed"

###
# Ingress + TLS
###

# Option 1 — Application Load Balancer (alb) + AWS ACM certificates (acm)
# - Terminates TLS at the AWS ALB using ACM certificates.
# - Works with both dns_provider="route53" (Terraform manages ACM validation) and "self-managed" (you create validation records from outputs).
# - Uses Kubernetes Ingress resources (ALB controller).
ingress_controller = "alb"
tls_mode           = "acm"

# Option 2 — NGINX Ingress Controller (ingress-nginx) + Let's Encrypt certificates (letsencrypt)
# - Terminates TLS at ingress-nginx using cert-manager (Let's Encrypt).
# - Requires a public HTTP endpoint for ACME HTTP-01 challenges (port 80) during issuance/renewal.
# - Good fit when you want "standard" Kubernetes Ingress behavior.
# ingress_controller = "ingress-nginx"
# tls_mode           = "letsencrypt"
# letsencrypt_email  = "me@example.com"

# When ingress-nginx sits behind another L7 proxy/load balancer, set this to true.
# ingress_nginx_behind_l7 = true

# Option 3 — Istio Gateway + Let's Encrypt certificates (letsencrypt)
# - Installs Istio and exposes the Istio ingress gateway as a public LoadBalancer Service (AWS NLB).
# - Terminates TLS at the Istio Gateway using cert-manager (Let's Encrypt).
# - Uses Istio Gateway + VirtualService for north-south routing; no Kubernetes Ingress for GoodData routing.
# ingress_controller = "istio_gateway"
# tls_mode           = "letsencrypt"
# letsencrypt_email  = "me@example.com"

###
# Organization configuration
###
# Authentication endpoint hostname
auth_hostname = "auth.gooddata.example.com"

# Configure one or more GoodData.CN organizations to be managed by Terraform.
# - If gdcn_orgs is empty, Terraform will not create any Organization objects.
# - Each org must include id, name, admin_user, admin_group, and hostname.
# - Hostnames are provided explicitly per org.
#
gdcn_orgs = [
  {
    id          = "main"
    name        = "Main Organization"
    admin_user  = "admin"
    admin_group = "adminGroup"
    hostname    = "gooddata.example.com"
  }
]

###
# Container image caching (optional)
###
# Uncomment to enable image caching and avoid Docker Hub rate limits
# enable_image_cache     = true
# dockerhub_username     = "myusername"
# dockerhub_access_token = "myaccesstoken"

###
# EKS & infrastructure sizing (optional)
###
# eks_version                      = "1.35"
# eks_node_types                   = ["m6i.xlarge"]
# eks_max_nodes                    = 10
# eks_endpoint_public_access       = true
# eks_endpoint_public_access_cidrs = ["x.x.x.x/32"]
# eks_endpoint_private_access      = false

# rds_instance_class      = "db.t4g.medium"
# rds_deletion_protection = false
# rds_skip_final_snapshot = true
