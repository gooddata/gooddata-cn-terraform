###
# Azure subscription & location
###
# Set if you want to override the subscription/tenant from `az login`.
# Otherwise, Terraform uses your current Azure CLI session.
# azure_subscription_id = "00000000-0000-0000-0000-000000000000"
# azure_tenant_id       = "00000000-0000-0000-0000-000000000000"

# Region to deploy resources to
azure_location = "East US"

# Additional tags to apply to all Azure resources
# azure_additional_tags = {
#   Environment = "dev"
# }

###
# GoodData.CN deployment configuration
###
helm_gdcn_version = "3.54.0" # use latest version here: https://www.gooddata.com/docs/cloud-native/latest/whats-new-cn/
deployment_name   = "gooddata-cn"

# GoodData.CN license key
gdcn_license_key = "key/asdf==" # provided by GoodData

# Deploys and enables GoodData generative AI services
# enable_ai_features = true

# Size profile controls replicas/resources across services:
# - dev: lowest footprint, not HA
# - prod-small: HA (>= 2 replica per service), resources for services increased
# NOTE: switching size profile after deploying isn't supported since persistent
# volume sizes can't be automatically adjusted in-place.
size_profile = "prod-small"

###
# DNS
###
# Azure DNS records must be managed externally.
# Terraform outputs the public IP address and required DNS records.
dns_provider = "self-managed"

###
# Ingress + TLS
###

# Option 1 — NGINX Ingress Controller (ingress-nginx) + Let's Encrypt certificates (letsencrypt)
ingress_controller = "ingress-nginx"
tls_mode          = "letsencrypt"
letsencrypt_email = "me@example.com"

# When ingress-nginx sits behind another L7 proxy/load balancer, set this to true.
# ingress_nginx_behind_l7 = true

# Option 2 — Istio Gateway + Let's Encrypt certificates (letsencrypt)
# ingress_controller = "istio_gateway"
# tls_mode           = "letsencrypt"
# letsencrypt_email  = "me@example.com"

###
# Organization configuration
###
# Authentication endpoint hostname
auth_hostname = "auth.gooddata.example.com"

# Configure one or more GoodData.CN organizations to be managed by Terraform.
# - If gdcn_orgs is empty, Terraform will not create any Organization objects.
# - Each org must include id, name, admin_user, admin_group, and hostname.
# - Hostnames are provided explicitly per org.
#
gdcn_orgs = [
  {
    id          = "main"
    name        = "Main Organization"
    admin_user  = "admin"
    admin_group = "adminGroup"
    hostname    = "gooddata.example.com"
  }
]

###
# Container image caching (optional)
###
# Uncomment to enable image caching and avoid Docker Hub rate limits
# enable_image_cache     = true
# dockerhub_username     = "myusername"
# dockerhub_access_token = "myaccesstoken"

###
# AKS & infrastructure sizing (optional)
###
# aks_version                         = "1.34"
# aks_node_vm_size                    = "Standard_D4as_v6"
# aks_min_nodes                       = 2
# aks_max_nodes                       = 10
# aks_api_server_authorized_ip_ranges = ["x.x.x.x/32"]

# postgresql_sku_name   = "GP_Standard_D2ds_v5"
# postgresql_storage_mb = 32768
